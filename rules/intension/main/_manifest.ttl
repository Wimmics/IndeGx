@prefix mf:      <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix kgi: <http://ns.inria.fr/kg/index#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

<> a mf:Manifest ;
    mf:entries (
        <init.ttl>
        # <online.ttl>
    ) .

<init.ttl>  a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
            PREFIX kgi: <http://ns.inria.fr/kg/index#>
            INSERT DATA {
                $rawEndpointUrl a kgi:Endpoint .
            }
            """
        ]
    ) .

<online.ttl>  a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
            PREFIX earl: <http://www.w3.org/ns/earl#>
            INSERT DATA {
                [
                    earl:subject $rawEndpointUrl ;
                    earl:test <http://ns.inria.fr/kg/index#online> ;
                    a earl:Assertion ;
                    earl:result [ 
                        earl:outcome earl:passed ;
                        a earl:TestResult 
                    ]
                ]
            }
            """
        ]
    ) ;
    kgi:onFailure (
        [
            mf:action """
            PREFIX earl: <http://www.w3.org/ns/earl#>
            INSERT DATA {
                [ 
                    earl:subject $rawEndpointUrl ;
                    earl:test <http://ns.inria.fr/kg/index#online> ;
                    a earl:Assertion ;
                    earl:result [ 
                        earl:outcome earl:failed ;
                        a earl:TestResult 
                    ]
                ]
            }
            """
        ]
    ) .