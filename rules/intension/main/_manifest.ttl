@prefix mf:      <http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#> .
@prefix kgi: <http://ns.inria.fr/kg/index#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

<> a mf:Manifest ;
    mf:include (
        <SPARQLFeatures/_manifest.ttl>
    ) ;
    mf:entries (
        <init.ttl>
        <online.ttl>
    ) .

<init.ttl>  a mf:ManifestEntry ;
    kgi:onSuccess (
        [
            mf:action """
            PREFIX kgi: <http://ns.inria.fr/kg/index#>
            PREFIX sd: <http://www.w3.org/ns/sparql-service-description#>
            PREFIX earl: <http://www.w3.org/ns/earl#>
            PREFIX prov: <http://www.w3.org/ns/prov#>
            PREFIX dcat: <http://www.w3.org/ns/dcat#>
            PREFIX void: <http://rdfs.org/ns/void#>
            INSERT DATA {
                $rawEndpointUrl a sd:Service, dcat:DataService , prov:Entity , earl:TestSubject ;
                    sd:endpoint $rawEndpointUrl .
            }
            """
        ]
    ) .

<online.ttl>  a mf:ManifestEntry ;
    kgi:requiredAssets ( 
        <init.ttl> 
    ) ;
    kgi:onSuccess (
        [
            mf:action """
            PREFIX kgi: <http://ns.inria.fr/kg/index#>
            INSERT DATA {
                $rawEndpointUrl kgi:passed <https://raw.githubusercontent.com/Wimmics/IndeGx/intentionDeclaration/rules/intension/main/online.ttl> .
            }
            """
        ]
    ) ;
    kgi:onFailure (
        [
            mf:action """
            PREFIX kgi: <http://ns.inria.fr/kg/index#>
            INSERT DATA {
                $rawEndpointUrl kgi:failed <https://raw.githubusercontent.com/Wimmics/IndeGx/intentionDeclaration/rules/intension/main/online.ttl> .
            }
            """
        ]
    ) .