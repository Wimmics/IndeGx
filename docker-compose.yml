version: '3.8'
services:
  corese:
    image: wimmics/corese:latest
    hostname: corese
    environment:
      OPTIONS: "-su"
      JVM_XMX: "15g"
    expose: 
      - "8080"
    volumes:
      - ./output:/usr/local/corese/log
      - ./config:/usr/local/corese/config
    extra_hosts:
      - host.docker.internal:host-gateway
  indegx:
    build: .
    depends_on:
      - corese
    volumes:
      - ./input:/input
      - ./output:/output
      - ./config:/config
      - ./catalogs:/catalogs
      - ./rules:/rules
    environment:
      - INDEGX_ARGS=${INDEGX_ARGS}