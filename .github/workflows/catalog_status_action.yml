name: Update SPARQL Endpoint Service Status
on:
    workflow_dispatch:
    schedule:
    - cron: '0 * * * *' # every hour
jobs:
    update-sparql-endpoint-status:
        runs-on: ubuntu-latest
        name: Update SPARQL Endpoint Service Status
        steps:
        - uses: actions/checkout@v4
        - name: Run service check
          working-directory: ./scripts/endpoint_status
          run: ./script.sh
        - name: Commit files
          run: |
              git diff-index --quiet HEAD || git add catalogs/catalog.latest-status.ttl
              git config --local user.email "pierre.maillot@inria.fr"
              git config --local user.name "Pierre Maillot"
              git diff-index --quiet HEAD || git commit -m "Automatic status update" -a
        - name: Push changes
          uses: ad-m/github-push-action@master
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            branch: endpoint_status
    
    